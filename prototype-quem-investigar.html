<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quem Investigar? - Prototype</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Source+Sans+3:wght@400;600;700&family=JetBrains+Mono:wght@500&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-primary: #0A0A0C;
      --bg-secondary: #111114;
      --bg-tertiary: #1a1a1f;
      --bg-card: rgba(17, 17, 20, 0.85);
      --accent-red: #E04545;
      --accent-amber: #D4A03A;
      --accent-teal: #3D9996;
      --accent-blue: #4682B4;
      --text-primary: #F5F5F3;
      --text-secondary: #9A9CA8;
      --text-muted: #5C5E6A;
      --border: #232328;
      --border-hover: #35353d;
      --status-low: #34A853;
      --font-display: "Bebas Neue", sans-serif;
      --font-body: "Source Sans 3", system-ui, sans-serif;
      --font-mono: "JetBrains Mono", monospace;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: var(--font-body);
      background-color: var(--bg-primary);
      color: var(--text-primary);
      min-height: 100vh;
      background-image:
        radial-gradient(ellipse 80% 50% at 50% -20%, rgba(61, 153, 150, 0.08), transparent),
        radial-gradient(ellipse 60% 40% at 100% 100%, rgba(70, 130, 180, 0.05), transparent);
      -webkit-font-smoothing: antialiased;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 24px;
    }

    /* Header */
    .header {
      margin-bottom: 32px;
    }

    .header h1 {
      font-family: var(--font-display);
      font-size: 3.5rem;
      letter-spacing: 2px;
      color: var(--text-primary);
      line-height: 1;
      margin-bottom: 8px;
    }

    .header p {
      color: var(--text-secondary);
      font-size: 1.1rem;
    }

    .header-row {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
    }

    .login-btn {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 10px 20px;
      background: white;
      color: #333;
      border: none;
      border-radius: 8px;
      font-family: var(--font-body);
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
    }

    .login-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(255,255,255,0.1);
    }

    /* Selection Counter */
    .selection-counter {
      display: inline-flex;
      align-items: center;
      gap: 12px;
      padding: 12px 20px;
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: 12px;
      margin-bottom: 24px;
    }

    .counter-dots {
      display: flex;
      gap: 6px;
    }

    .counter-dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: var(--border);
      transition: background 0.3s, transform 0.3s;
    }

    .counter-dot.filled {
      background: var(--accent-teal);
      transform: scale(1.1);
    }

    .counter-text {
      color: var(--text-secondary);
      font-size: 14px;
    }

    .counter-text strong {
      color: var(--accent-teal);
    }

    /* Main Grid */
    .main-grid {
      display: grid;
      grid-template-columns: 1fr 360px;
      gap: 24px;
    }

    @media (max-width: 900px) {
      .main-grid {
        grid-template-columns: 1fr;
      }
    }

    /* Search */
    .search-bar {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 14px 20px;
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: 12px;
      margin-bottom: 16px;
      cursor: pointer;
      transition: border-color 0.2s;
    }

    .search-bar:hover {
      border-color: var(--accent-teal);
    }

    .search-bar svg {
      color: var(--text-muted);
      flex-shrink: 0;
    }

    .search-bar span {
      color: var(--text-muted);
      font-size: 15px;
    }

    /* Filters */
    .filters {
      display: flex;
      gap: 8px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    .filter-btn {
      padding: 8px 16px;
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: 8px;
      color: var(--text-secondary);
      font-family: var(--font-body);
      font-size: 13px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .filter-btn:hover {
      border-color: var(--text-muted);
      color: var(--text-primary);
    }

    .filter-btn.active {
      background: var(--accent-teal);
      border-color: var(--accent-teal);
      color: var(--bg-primary);
    }

    /* Deputy Grid */
    .deputy-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 16px;
    }

    /* Deputy Card */
    .deputy-card {
      background: linear-gradient(145deg, rgba(17, 17, 20, 0.9) 0%, rgba(17, 17, 20, 0.75) 100%);
      border: 1px solid rgba(255, 255, 255, 0.04);
      border-radius: 16px;
      padding: 20px;
      transition: all 0.3s cubic-bezier(0.22, 1, 0.36, 1);
      cursor: pointer;
      position: relative;
      overflow: hidden;
    }

    .deputy-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: transparent;
      transition: background 0.3s;
    }

    .deputy-card:hover {
      border-color: rgba(61, 153, 150, 0.3);
      transform: translateY(-2px);
    }

    .deputy-card.selected {
      border-color: var(--accent-teal);
      box-shadow: 0 0 0 1px var(--accent-teal), 0 8px 32px -8px rgba(61, 153, 150, 0.3);
    }

    .deputy-card.selected::before {
      background: var(--accent-teal);
    }

    .deputy-card.disabled {
      opacity: 0.5;
      pointer-events: none;
    }

    .deputy-card-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 12px;
    }

    .deputy-name {
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 4px;
    }

    .deputy-meta {
      font-size: 13px;
      color: var(--text-muted);
    }

    .risk-badge {
      padding: 4px 10px;
      border-radius: 6px;
      font-size: 11px;
      font-weight: 700;
      letter-spacing: 0.5px;
    }

    .risk-badge.critico {
      background: rgba(224, 69, 69, 0.15);
      color: var(--accent-red);
      border: 1px solid rgba(224, 69, 69, 0.3);
    }

    .risk-badge.alto {
      background: rgba(212, 160, 58, 0.15);
      color: var(--accent-amber);
      border: 1px solid rgba(212, 160, 58, 0.3);
    }

    .risk-badge.medio {
      background: rgba(61, 153, 150, 0.15);
      color: var(--accent-teal);
      border: 1px solid rgba(61, 153, 150, 0.3);
    }

    .risk-badge.baixo {
      background: rgba(52, 168, 83, 0.15);
      color: var(--status-low);
      border: 1px solid rgba(52, 168, 83, 0.3);
    }

    .deputy-stats {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
      margin-bottom: 16px;
    }

    .stat {
      text-align: center;
    }

    .stat-value {
      font-family: var(--font-mono);
      font-size: 1rem;
      font-weight: 500;
      color: var(--text-primary);
    }

    .stat-label {
      font-size: 11px;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .deputy-flags {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 16px;
    }

    .flag {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 4px 8px;
      background: rgba(224, 69, 69, 0.1);
      border-radius: 4px;
      font-size: 11px;
      color: var(--accent-red);
    }

    .select-btn {
      width: 100%;
      padding: 12px;
      background: var(--bg-tertiary);
      border: 1px solid var(--border);
      border-radius: 8px;
      color: var(--text-secondary);
      font-family: var(--font-body);
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .select-btn:hover {
      background: var(--accent-teal);
      border-color: var(--accent-teal);
      color: var(--bg-primary);
    }

    .select-btn.selected {
      background: var(--accent-teal);
      border-color: var(--accent-teal);
      color: var(--bg-primary);
    }

    /* Sidebar */
    .sidebar {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    /* Selection Panel */
    .selection-panel {
      background: linear-gradient(145deg, rgba(17, 17, 20, 0.9) 0%, rgba(17, 17, 20, 0.75) 100%);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 20px;
    }

    .panel-title {
      font-family: var(--font-display);
      font-size: 1.3rem;
      letter-spacing: 1px;
      color: var(--text-primary);
      margin-bottom: 16px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .panel-count {
      font-family: var(--font-body);
      font-size: 14px;
      color: var(--accent-teal);
    }

    .selection-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin-bottom: 20px;
    }

    .selection-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px;
      background: var(--bg-secondary);
      border-radius: 10px;
      animation: slideIn 0.3s ease;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateX(-10px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    .selection-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: var(--accent-teal);
      flex-shrink: 0;
    }

    .selection-info {
      flex: 1;
    }

    .selection-name {
      font-size: 14px;
      font-weight: 600;
      color: var(--text-primary);
    }

    .selection-meta {
      font-size: 12px;
      color: var(--text-muted);
    }

    .selection-remove {
      padding: 6px;
      background: transparent;
      border: none;
      color: var(--text-muted);
      cursor: pointer;
      border-radius: 6px;
      transition: all 0.2s;
    }

    .selection-remove:hover {
      background: rgba(224, 69, 69, 0.1);
      color: var(--accent-red);
    }

    .selection-empty {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px;
      background: var(--bg-secondary);
      border: 1px dashed var(--border);
      border-radius: 10px;
      color: var(--text-muted);
      font-size: 13px;
    }

    .empty-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      border: 2px dashed var(--text-muted);
      flex-shrink: 0;
    }

    .confirm-btn {
      width: 100%;
      padding: 14px;
      background: var(--accent-teal);
      border: none;
      border-radius: 10px;
      color: var(--bg-primary);
      font-family: var(--font-body);
      font-size: 15px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.2s;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .confirm-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 20px rgba(61, 153, 150, 0.4);
    }

    .confirm-btn:disabled {
      background: var(--bg-tertiary);
      color: var(--text-muted);
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    /* Leaderboard */
    .leaderboard {
      background: linear-gradient(145deg, rgba(17, 17, 20, 0.9) 0%, rgba(17, 17, 20, 0.75) 100%);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 20px;
    }

    .leaderboard-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 4px;
    }

    .leaderboard-title {
      font-family: var(--font-display);
      font-size: 1.3rem;
      letter-spacing: 1px;
      color: var(--text-primary);
    }

    .leaderboard-live {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 11px;
      color: var(--accent-teal);
    }

    .live-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: var(--accent-teal);
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.4; }
    }

    .leaderboard-meta {
      font-size: 12px;
      color: var(--text-muted);
      margin-bottom: 16px;
    }

    .leaderboard-list {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .leaderboard-item {
      display: grid;
      grid-template-columns: 32px 1fr auto;
      gap: 12px;
      align-items: center;
      padding: 12px;
      background: var(--bg-secondary);
      border-radius: 10px;
      transition: background 0.2s;
    }

    .leaderboard-item:hover {
      background: var(--bg-tertiary);
    }

    .leaderboard-item.top-3 {
      background: linear-gradient(135deg, rgba(61, 153, 150, 0.1) 0%, rgba(61, 153, 150, 0.05) 100%);
      border: 1px solid rgba(61, 153, 150, 0.2);
    }

    .leaderboard-rank {
      font-family: var(--font-display);
      font-size: 1.2rem;
      color: var(--text-muted);
      text-align: center;
    }

    .leaderboard-item.top-3 .leaderboard-rank {
      color: var(--accent-teal);
    }

    .leaderboard-deputy {
      min-width: 0;
    }

    .leaderboard-name {
      font-size: 14px;
      font-weight: 600;
      color: var(--text-primary);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .leaderboard-party {
      font-size: 12px;
      color: var(--text-muted);
    }

    .leaderboard-votes {
      text-align: right;
    }

    .vote-count {
      font-family: var(--font-mono);
      font-size: 14px;
      font-weight: 500;
      color: var(--text-primary);
    }

    .vote-bar {
      width: 60px;
      height: 4px;
      background: var(--bg-tertiary);
      border-radius: 2px;
      overflow: hidden;
      margin-top: 4px;
    }

    .vote-bar-fill {
      height: 100%;
      background: var(--accent-teal);
      border-radius: 2px;
      transition: width 0.5s ease;
    }

    /* Floating Bar (Mobile) */
    .floating-bar {
      display: none;
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      padding: 16px 24px;
      background: linear-gradient(180deg, transparent 0%, var(--bg-primary) 20%);
      z-index: 100;
    }

    .floating-bar-inner {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 20px;
      background: var(--bg-secondary);
      border: 1px solid var(--accent-teal);
      border-radius: 12px;
      box-shadow: 0 -4px 20px rgba(0,0,0,0.3);
    }

    .floating-dots {
      display: flex;
      gap: 6px;
    }

    .floating-text {
      font-size: 14px;
      color: var(--text-secondary);
    }

    .floating-btn {
      padding: 10px 20px;
      background: var(--accent-teal);
      border: none;
      border-radius: 8px;
      color: var(--bg-primary);
      font-family: var(--font-body);
      font-size: 14px;
      font-weight: 700;
      cursor: pointer;
    }

    @media (max-width: 900px) {
      .floating-bar {
        display: block;
      }

      .sidebar {
        display: none;
      }

      .container {
        padding-bottom: 100px;
      }
    }

    /* Success Modal */
    .modal-overlay {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.8);
      z-index: 200;
      align-items: center;
      justify-content: center;
      padding: 24px;
    }

    .modal-overlay.active {
      display: flex;
    }

    .modal {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: 20px;
      padding: 32px;
      max-width: 420px;
      width: 100%;
      text-align: center;
      animation: modalIn 0.3s ease;
    }

    @keyframes modalIn {
      from {
        opacity: 0;
        transform: scale(0.95);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    .modal-icon {
      width: 64px;
      height: 64px;
      margin: 0 auto 20px;
      background: var(--accent-teal);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--bg-primary);
    }

    .modal h2 {
      font-family: var(--font-display);
      font-size: 1.8rem;
      letter-spacing: 1px;
      margin-bottom: 12px;
    }

    .modal p {
      color: var(--text-secondary);
      margin-bottom: 24px;
    }

    .modal-selections {
      text-align: left;
      margin-bottom: 24px;
    }

    .modal-selection {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px;
      background: var(--bg-tertiary);
      border-radius: 8px;
      margin-bottom: 8px;
    }

    .modal-selection-info {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .modal-selection-rank {
      font-size: 12px;
      color: var(--text-muted);
      background: var(--bg-secondary);
      padding: 4px 8px;
      border-radius: 4px;
    }

    .share-btn {
      width: 100%;
      padding: 14px;
      background: transparent;
      border: 1px solid var(--accent-teal);
      border-radius: 10px;
      color: var(--accent-teal);
      font-family: var(--font-body);
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      margin-bottom: 16px;
    }

    .share-btn:hover {
      background: var(--accent-teal);
      color: var(--bg-primary);
    }

    .modal-footer {
      font-size: 13px;
      color: var(--text-muted);
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Header -->
    <header class="header">
      <div class="header-row">
        <div>
          <h1>QUEM INVESTIGAR?</h1>
          <p>Escolha até 3 deputados para investigação aprofundada</p>
        </div>
        <button class="login-btn" id="loginBtn">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
            <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/>
            <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/>
            <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"/>
            <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/>
          </svg>
          Entrar com Google
        </button>
      </div>
    </header>

    <!-- Selection Counter -->
    <div class="selection-counter">
      <div class="counter-dots">
        <div class="counter-dot" id="dot1"></div>
        <div class="counter-dot" id="dot2"></div>
        <div class="counter-dot" id="dot3"></div>
      </div>
      <span class="counter-text"><strong id="selectionCount">0</strong> de 3 selecionados</span>
    </div>

    <!-- Main Grid -->
    <div class="main-grid">
      <!-- Left: Deputy Selection -->
      <div class="main-content">
        <!-- Search -->
        <div class="search-bar">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"/>
            <path d="M21 21l-4.35-4.35"/>
          </svg>
          <span>Buscar por nome, partido ou estado...</span>
        </div>

        <!-- Filters -->
        <div class="filters">
          <button class="filter-btn active">Todos</button>
          <button class="filter-btn">Crítico</button>
          <button class="filter-btn">Alto</button>
          <button class="filter-btn">Médio</button>
          <button class="filter-btn">SP</button>
          <button class="filter-btn">RJ</button>
          <button class="filter-btn">MG</button>
        </div>

        <!-- Deputy Grid -->
        <div class="deputy-grid" id="deputyGrid">
          <!-- Cards will be inserted by JS -->
        </div>
      </div>

      <!-- Right: Sidebar -->
      <aside class="sidebar">
        <!-- Selection Panel -->
        <div class="selection-panel">
          <div class="panel-title">
            SUAS ESCOLHAS
            <span class="panel-count" id="panelCount">(0/3)</span>
          </div>
          <div class="selection-list" id="selectionList">
            <div class="selection-empty">
              <div class="empty-dot"></div>
              Selecione deputados ao lado
            </div>
          </div>
          <button class="confirm-btn" id="confirmBtn" disabled>
            Confirmar Votos
          </button>
        </div>

        <!-- Leaderboard -->
        <div class="leaderboard">
          <div class="leaderboard-header">
            <div class="leaderboard-title">PRIORIDADES DA SEMANA</div>
            <div class="leaderboard-live">
              <div class="live-dot"></div>
              Ao vivo
            </div>
          </div>
          <div class="leaderboard-meta">Semana 3 de Janeiro · 2.847 votos</div>
          <div class="leaderboard-list" id="leaderboardList">
            <!-- Items will be inserted by JS -->
          </div>
        </div>
      </aside>
    </div>
  </div>

  <!-- Floating Bar (Mobile) -->
  <div class="floating-bar" id="floatingBar">
    <div class="floating-bar-inner">
      <div class="floating-dots">
        <div class="counter-dot" id="floatDot1"></div>
        <div class="counter-dot" id="floatDot2"></div>
        <div class="counter-dot" id="floatDot3"></div>
      </div>
      <span class="floating-text"><span id="floatCount">0</span> de 3</span>
      <button class="floating-btn" id="floatingBtn">VOTAR →</button>
    </div>
  </div>

  <!-- Success Modal -->
  <div class="modal-overlay" id="modalOverlay">
    <div class="modal">
      <div class="modal-icon">
        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
          <path d="M20 6L9 17l-5-5"/>
        </svg>
      </div>
      <h2>VOTOS REGISTRADOS</h2>
      <p>Suas escolhas para investigação:</p>
      <div class="modal-selections" id="modalSelections">
        <!-- Will be populated by JS -->
      </div>
      <button class="share-btn">
        Compartilhar minhas escolhas
      </button>
      <div class="modal-footer">
        Próxima votação: Segunda, 8h
      </div>
    </div>
  </div>

  <script>
    // Sample data
    const deputies = [
      { id: 1, name: 'Eduardo Bolsonaro', party: 'PL', uf: 'SP', risk: 'critico', spending: 2100000, hhi: 0.72, score: 94, flags: ['Fornecedor único 78%', 'Benford p < 0.01'], votes: 847 },
      { id: 2, name: 'Carla Zambelli', party: 'PL', uf: 'SP', risk: 'critico', spending: 1950000, hhi: 0.68, score: 91, flags: ['Concentração crítica', 'Gastos atípicos'], votes: 612 },
      { id: 3, name: 'Arthur Lira', party: 'PP', uf: 'AL', risk: 'alto', spending: 2400000, hhi: 0.54, score: 78, flags: ['HHI elevado'], votes: 489 },
      { id: 4, name: 'Nikolas Ferreira', party: 'PL', uf: 'MG', risk: 'medio', spending: 890000, hhi: 0.42, score: 62, flags: ['Valores redondos'], votes: 234 },
      { id: 5, name: 'Maria do Rosário', party: 'PT', uf: 'RS', risk: 'alto', spending: 1650000, hhi: 0.58, score: 75, flags: ['Fornecedor único 65%'], votes: 198 },
      { id: 6, name: 'Kim Kataguiri', party: 'UNIÃO', uf: 'SP', risk: 'medio', spending: 720000, hhi: 0.38, score: 55, flags: [], votes: 156 },
      { id: 7, name: 'Guilherme Boulos', party: 'PSOL', uf: 'SP', risk: 'baixo', spending: 480000, hhi: 0.22, score: 35, flags: [], votes: 89 },
      { id: 8, name: 'André Janones', party: 'AVANTE', uf: 'MG', risk: 'alto', spending: 1820000, hhi: 0.61, score: 82, flags: ['Benford anomalia', 'Picos de gasto'], votes: 267 },
    ];

    let selectedDeputies = [];
    const maxSelections = 3;

    // Format currency
    function formatCurrency(value) {
      return new Intl.NumberFormat('pt-BR', {
        style: 'currency',
        currency: 'BRL',
        notation: 'compact',
        maximumFractionDigits: 1
      }).format(value);
    }

    // Render deputy card
    function renderDeputyCard(deputy) {
      const isSelected = selectedDeputies.some(d => d.id === deputy.id);
      const isDisabled = selectedDeputies.length >= maxSelections && !isSelected;

      return `
        <div class="deputy-card ${isSelected ? 'selected' : ''} ${isDisabled ? 'disabled' : ''}"
             data-id="${deputy.id}" onclick="toggleSelection(${deputy.id})">
          <div class="deputy-card-header">
            <div>
              <div class="deputy-name">${deputy.name}</div>
              <div class="deputy-meta">${deputy.party} · ${deputy.uf}</div>
            </div>
            <span class="risk-badge ${deputy.risk}">${deputy.risk.toUpperCase()}</span>
          </div>
          <div class="deputy-stats">
            <div class="stat">
              <div class="stat-value">${formatCurrency(deputy.spending)}</div>
              <div class="stat-label">Gasto</div>
            </div>
            <div class="stat">
              <div class="stat-value">${deputy.hhi.toFixed(2)}</div>
              <div class="stat-label">HHI</div>
            </div>
            <div class="stat">
              <div class="stat-value">${deputy.score}%</div>
              <div class="stat-label">Risco</div>
            </div>
          </div>
          ${deputy.flags.length > 0 ? `
            <div class="deputy-flags">
              ${deputy.flags.map(flag => `<span class="flag">⚠ ${flag}</span>`).join('')}
            </div>
          ` : ''}
          <button class="select-btn ${isSelected ? 'selected' : ''}">
            ${isSelected ? '✓ SELECIONADO' : '+ SELECIONAR'}
          </button>
        </div>
      `;
    }

    // Render leaderboard
    function renderLeaderboard() {
      const sorted = [...deputies].sort((a, b) => b.votes - a.votes);
      const maxVotes = sorted[0].votes;

      document.getElementById('leaderboardList').innerHTML = sorted.slice(0, 5).map((deputy, i) => `
        <div class="leaderboard-item ${i < 3 ? 'top-3' : ''}">
          <div class="leaderboard-rank">${i + 1}</div>
          <div class="leaderboard-deputy">
            <div class="leaderboard-name">${deputy.name}</div>
            <div class="leaderboard-party">${deputy.party}-${deputy.uf}</div>
          </div>
          <div class="leaderboard-votes">
            <div class="vote-count">${deputy.votes}</div>
            <div class="vote-bar">
              <div class="vote-bar-fill" style="width: ${(deputy.votes / maxVotes) * 100}%"></div>
            </div>
          </div>
        </div>
      `).join('');
    }

    // Toggle selection
    function toggleSelection(deputyId) {
      const deputy = deputies.find(d => d.id === deputyId);
      const index = selectedDeputies.findIndex(d => d.id === deputyId);

      if (index >= 0) {
        selectedDeputies.splice(index, 1);
      } else if (selectedDeputies.length < maxSelections) {
        selectedDeputies.push(deputy);
      }

      updateUI();
    }

    // Remove selection
    function removeSelection(deputyId) {
      selectedDeputies = selectedDeputies.filter(d => d.id !== deputyId);
      updateUI();
    }

    // Update UI
    function updateUI() {
      // Update grid
      document.getElementById('deputyGrid').innerHTML = deputies.map(renderDeputyCard).join('');

      // Update counter dots
      for (let i = 1; i <= 3; i++) {
        const dot = document.getElementById(`dot${i}`);
        const floatDot = document.getElementById(`floatDot${i}`);
        if (i <= selectedDeputies.length) {
          dot.classList.add('filled');
          floatDot.classList.add('filled');
        } else {
          dot.classList.remove('filled');
          floatDot.classList.remove('filled');
        }
      }

      // Update count
      document.getElementById('selectionCount').textContent = selectedDeputies.length;
      document.getElementById('panelCount').textContent = `(${selectedDeputies.length}/3)`;
      document.getElementById('floatCount').textContent = selectedDeputies.length;

      // Update selection list
      const selectionList = document.getElementById('selectionList');
      if (selectedDeputies.length === 0) {
        selectionList.innerHTML = `
          <div class="selection-empty">
            <div class="empty-dot"></div>
            Selecione deputados ao lado
          </div>
        `;
      } else {
        selectionList.innerHTML = selectedDeputies.map(deputy => `
          <div class="selection-item">
            <div class="selection-dot"></div>
            <div class="selection-info">
              <div class="selection-name">${deputy.name}</div>
              <div class="selection-meta">${deputy.party}-${deputy.uf} · ${deputy.risk.toUpperCase()}</div>
            </div>
            <button class="selection-remove" onclick="event.stopPropagation(); removeSelection(${deputy.id})">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M18 6L6 18M6 6l12 12"/>
              </svg>
            </button>
          </div>
        `).join('') + (selectedDeputies.length < 3 ? `
          <div class="selection-empty">
            <div class="empty-dot"></div>
            Escolha mais ${3 - selectedDeputies.length}
          </div>
        ` : '');
      }

      // Update confirm button
      const confirmBtn = document.getElementById('confirmBtn');
      confirmBtn.disabled = selectedDeputies.length === 0;

      // Update floating bar visibility
      const floatingBar = document.getElementById('floatingBar');
      floatingBar.style.display = selectedDeputies.length > 0 ? 'block' : 'none';
    }

    // Show success modal
    function showSuccessModal() {
      const modal = document.getElementById('modalOverlay');
      const selections = document.getElementById('modalSelections');

      selections.innerHTML = selectedDeputies.map((deputy, i) => `
        <div class="modal-selection">
          <div class="modal-selection-info">
            <div class="selection-dot"></div>
            <div>
              <div class="selection-name">${deputy.name}</div>
              <div class="selection-meta">${deputy.party}-${deputy.uf}</div>
            </div>
          </div>
          <span class="modal-selection-rank">#${deputies.sort((a,b) => b.votes - a.votes).findIndex(d => d.id === deputy.id) + 1}</span>
        </div>
      `).join('');

      modal.classList.add('active');
    }

    // Initialize
    document.getElementById('deputyGrid').innerHTML = deputies.map(renderDeputyCard).join('');
    renderLeaderboard();

    // Filter buttons
    document.querySelectorAll('.filter-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
        this.classList.add('active');
      });
    });

    // Confirm button
    document.getElementById('confirmBtn').addEventListener('click', showSuccessModal);
    document.getElementById('floatingBtn').addEventListener('click', showSuccessModal);

    // Close modal
    document.getElementById('modalOverlay').addEventListener('click', function(e) {
      if (e.target === this) {
        this.classList.remove('active');
      }
    });
  </script>
</body>
</html>
